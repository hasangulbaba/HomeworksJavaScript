<!DOCTYPE html>
<html>
<head>
 <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<meta charset="UTF-8"/>

<title>Website Project</title>
<script src="database.js"></script>
<style>

/* Responsive navigation menu (for mobile devices) */
@media screen and (max-width: 600px) {
  .nav a, .nav li, .card{
    float: none;
    display: block;
  }
}

nav {    
  display: block;
  margin: 0;
  text-align: center;
  min-width: 200px;
}
nav ul {
  margin: 0;
  padding: 0;
  list-style: none;
  text-decoration: none;

}
.nav a {
  display: block; 
  background: orange; 
  color: white; 
  text-decoration: none;
  padding: 0.8em 1.8em;
  text-transform: uppercase;
  position: relative;
}
.nav{  
  vertical-align: top; 
  display: inline-block;
  border-radius: 6px;
}
.nav li {
  position: relative;
  min-width: 180px;
}
.nav > li { 
  float: left; 
  border-bottom: 4px white solid; 
  margin-right: 1px; 
  text-decoration: none;
} 
.nav > li > a { 
  margin-bottom: 1px;
}
.nav > li:hover { 
  border-bottom-color: orange;
}

.nav li li a { 
  margin-top: 1px;
}
.nav li a:first-child:nth-last-child(2):before { 
  content: ""; 
  position: absolute; 
  height: 0; 
  width: 0; 
  text-decoration: none;
  border: 5px solid transparent; 
  top: 50% ;
  right: 5px;  
 }
/* submenu positioning*/
.nav ul {
  position: absolute;
  white-space: nowrap;
  z-index: 1;
  left: -99999em;
}
.nav > li:hover > ul {
  left: auto;
  margin-top: 0px;
  min-width: 100%;
}
.nav > li li:hover > ul { 
  left: 100%;
  margin-left: 1px;
  top: -1px;
}
/* arrow hover styling */
.nav > li > a:first-child:nth-last-child(2):before { 
  border-top-color: white; 
}
.nav > li:hover > a:first-child:nth-last-child(2):before {
  border: 5px solid transparent; 
  border-bottom-color: white; 
  margin-top:-5px
}
.nav li li > a:first-child:nth-last-child(2):before {  
  border-left-color: white; 
  margin-top: -5px
}
.nav li li:hover > a:first-child:nth-last-child(2):before {
  border: 5px solid transparent; 
  border-right-color: white;
  right: 10px; 
}
.card {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
  max-width: 200px;
  margin: auto;
  text-align: center;
  font-family: arial;
  max-height: 800px;
  padding:50px;
  display: inline-block;
}
.price {
  color: grey;
  font-size: 22px;
}
.card button {
  border: none;
  outline: 0;
  padding: 12px;
  color: white;
  background-color: #000;
  text-align: center;
  cursor: pointer;
  width: 100%;
  font-size: 18px;
}
.card button:hover {
  opacity: 0.7;
}
input[type=text] {
    width: 200px;
    box-sizing: border-box;
    border: 2px solid #ccc;
    border-radius: 4px;
    font-size: 16px;
    background-color: white;
    background-position: 10px 10px; 
    background-repeat: no-repeat;
    padding: 12px 20px 12px 40px;
    -webkit-transition: width 0.4s ease-in-out;
    transition: width 0.4s ease-in-out;
}
input[type=text]:focus {
    width: 40%;
}
</style>

<nav>
  <ul class="nav">
    <li><a href="#">ANASAYFA</a></li>
    <li><a href="#">KATEGORİ</a>
      <ul>
        <li><a href="#">KONUT</a>
	<ul>
            <li><a href="#">SATILIK</a></li>
            <li><a href="#">KİRALIK</a></li>
            <li><a href="#">GÜNLÜK KİRALIK</a></li>
        </ul>
	</li>
        <li><a href="#">İŞYERİ</a>
	<ul>
            <li><a href="#">SATILIK</a></li>
            <li><a href="#">KİRALIK</a></li>
        </ul>
	</li>
        <li><a href="#">ARSA</a>
	<ul>
            <li><a href="#">SATILIK</a></li>
            <li><a href="#">KİRALIK</a></li>
        </ul>
	</li>
        <li><a href="#">BİNA</a>
	<ul>
            <li><a href="#">SATILIK</a></li>
            <li><a href="#">KİRALIK</a></li>
        </ul>
	</li>
      </ul>
    </li>
    <li><a href="#" id="button_search" onClick="searchingVisibility()">ARAMA</a></li>
    <li><a href="#">YARDIM</a></li>
    <li><a href="#">HAKKIMIZDA</a></li>
    <li><a href="#">İLETİŞİM</a></li>
  </ul>
</nav><br>

<script>
function searchingVisibility() {
	var searching = document.getElementById("input_search");
	searching.style.visibility = "visible";
}
function searchingVisibilityHidden() {
	var searching_input = document.getElementById("input_search");
	searching_input.style.visibility = "hidden";
}
</script>
</head>
<body>
<form>
<center>
  <input style="visibility:hidden;" id="input_search" type="text" name="search" placeholder="Search..">
</center>
</form><br>
<center>
<div id="myTable" style="display:inline;">
</div>
</center>

<script>
const database = new Database();
const url = "https://sameteraslan.github.io/HomeworksJavaScript/MyProject/text_files/";
function readData(file) {
    console.log("readData "+file);
    if(file.includes("konut.txt")) {
      fetch(url+file)
          .then(r => r.text())
          .then(addKonut).then(makeRows);
    } 
/*	else if(file.includes("isyeri.txt")) {
      fetch(url+file)
          .then(r => r.text())
          .then(addIsyeri);
    }*/
	else {
		console.log("File could not find.")
	}
}
function parseKonut(line) {
    let b = line.split("\t");
    return b;
}

/*function parseCourse(line) {
	let b = line.split("\t");
	let name = b[0], time = b[1], date = b[2];
    let rooms = [];
    for (let i = 3; i < b.length; i++) 
		rooms.push(b[i]);
	//bayrak
    return new Course(b[0], b[1], b[2], rooms);
}*/
function addKonut(txt) {
    //let msg = txt.length+" chars, ";
    let a = txt.split("\n");
    //msg += a.length+" lines, ";
    for (let s of a) {
		let std = parseKonut(s);
		database.konut.set(std[0], [std[1], std[2], std[3], std[4], std[5], std[6]]);
		//console.log(database.students.get(std.id));
		//keys.push(std.id); vals.push(std);
    }
    console.log(database.konut);
    //report(msg + database.students.size  + " students");
}
readData("konut.txt");
function makeRows() {
    let row = "";
    for (let b of database.konut.values()) {
	    row += '<div class="card"><img src="' + b[1]  + '" style="width:100%"> <h2 style="min-height:200px">' + b[3] + '</h2><p class="price">' + b[2] + ' TL</p><p>' + b[4] + '</p> <p><button>İncele</button></p></div>';   
    }
    myTable.innerHTML = row; //out.innerText = t; 
}
//makeRows();
</script>

</body>
</html>
